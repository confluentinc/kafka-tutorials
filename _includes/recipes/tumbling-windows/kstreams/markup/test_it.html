<div class="recipe-try-it-step">
  <h4 class="subtitle is-4">1. Create a test configuration file</h4>

  <p>First, create a test file at <code>configuration/test.properties</code>:</p>
  <pre class="snippet"><code class="shell">{% include_raw recipes/tumbling-windows/kstreams/code/configuration/test.properties %}</code></pre>
</div>

<div class="recipe-try-it-step">
  <h4 class="subtitle is-4">2. Test the RatingTimestampExtractor class</h4>

  <p>Create a directory for the tests to live in:</p>
  <pre class="snippet"><code class="shell">{% include_raw recipes/tumbling-windows/kstreams/code/recipe-steps/test/make-test-dir.sh %}</code></pre>

  <p>Create the following file at <code>src/test/java/io/confluent/developer/RatingTimestampExtractorTest.java</code>. This tests the helper class that extracts event-time timestamps from incoming messages. The class has a depenency on the <code>TimestampExtractor</code> interface, but otherwise does not depend on anything external to our domain; it just needs a <code>Rating</code> object, and returns a timestamp. As such, it's very testable code:</p>

  <pre class="snippet"><code class="java">{% include_raw recipes/tumbling-windows/kstreams/code/src/test/java/io/confluent/developer/RatingTimestampExtractorTest.java %}</code></pre>
</div>


<div class="recipe-try-it-step">
  <h4 class="subtitle is-4">3. Test the streams topology</h4>

  <p>Now create the following file at <code>src/test/java/io/confluent/developer/TumblingWindowTest.java</code>. Testing a Kafka streams application requies a bit of test harness code, but the <code>org.apache.kafka.streams.TopologyTestDriver</code> class makes this easy.</p>
  <p>There is only one method in <code>TumblingWindowTest</code> annotated with <code>@Test</code>, and that is <code>testWindows()</code>. This method actually runs our Streams topology using the <code><a href="https://kafka.apache.org/{{ site.ak_javadoc_version }}/javadoc/org/apache/kafka/streams/TopologyTestDriver.html">TopologyTestDriver</a></code> and some mocked data that is set up inside the test method.</p>

  <pre class="snippet"><code class="java">{% include_raw recipes/tumbling-windows/kstreams/code/src/test/java/io/confluent/developer/TumblingWindowTest.java %}</code></pre>
</div>

<div class="recipe-try-it-step">
  <h4 class="subtitle is-4">4. Invoke the tests</h4>

  <p>Now run the test, which is as simple as:</p>
  <pre class="snippet"><code class="shell">{% include_raw recipes/joining/stream-table/kstreams/code/recipe-steps/test/invoke-tests.sh %}</code></pre>
</div>
